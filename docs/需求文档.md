# 肉牛全生命周期管理系统需求文档

## 1. 项目概述

### 1.1 项目背景
随着畜牧业的发展和数字化转型需求的增长，传统的肉牛养殖管理方式已无法满足现代养殖企业对精细化、智能化、高效化管理的需求。为了解决这一问题，我们开发了一套完整的肉牛全生命周期管理系统，旨在通过数字化手段提升养殖企业的管理水平和经济效益。

### 1.2 项目目标
- **数字化转型**：实现肉牛养殖全流程数字化管理
- **精细化管理**：提供精准的数据分析和决策支持
- **效率提升**：优化业务流程，提高管理效率
- **数据追溯**：建立完整的数据追溯体系
- 实现养殖基地的数字化管理，包括基地信息、牛棚设置等基础数据
- 建立完善的牛只档案管理系统，记录牛只的全生命周期信息
- 提供健康监测和诊疗管理功能，保障牛只健康
- 实现精准饲喂管理，优化饲料使用，降低养殖成本
- 提供采购、销售、物资等管理功能，实现全流程覆盖
- 建立数据统计分析体系，为管理决策提供数据支持

### 1.3 系统定位
本系统是一个集采购、养殖、精准饲喂、健康管理、销售和用户管理于一体的综合性管理平台，支持多终端访问（PC端、iOS端、Android端及大屏展示），界面简洁直观，交互友好。面向中小型肉牛养殖企业的综合管理平台，提供从养殖到销售的全流程管理解决方案。

### 1.4 目标用户
- **牧场主**：全局管理和决策支持
- **管理人员**：日常运营管理
- **饲养员工**：具体操作执行
- **兽医人员**：健康管理专业支持
- **销售人员**：销售业务管理
- 系统管理员

### 1.5 核心价值
- 提升管理效率，降低运营成本
- 实现数据可追溯，保障食品安全
- 提供智能决策支持，优化养殖效果
- 推进全流程数字化，提升竞争力
- **提高管理效率**：通过数字化管理方式，减少人工操作，提高工作效率
- **降低养殖成本**：通过精准饲喂和健康管理，降低饲料消耗和医疗成本
- **提升产品质量**：通过科学管理和数据分析，提升牛只品质
- **增强决策能力**：通过数据统计分析，为管理决策提供科学依据
- **保障食品安全**：通过全程可追溯管理，保障牛肉产品安全

---

## 2. 系统架构

### 2.1 技术架构

#### 2.1.1 技术栈选型
- **前端框架**：Vue 3 + Vite
  - 桌面端：Element Plus组件库
  - 移动端：Vue 3 + Vant UI组件库（响应式设计）
  - 状态管理：Pinia
  - 路由管理：Vue Router 4
  - 构建工具：Vite
- **后端框架**：Node.js + Express.js
  - 运行环境：Node.js 18+
  - Web框架：Express.js
  - ORM框架：Sequelize 或 TypeORM
  - 身份认证：JWT + Passport.js
  - API文档：Swagger/OpenAPI
- **数据库**：PostgreSQL 14+
  - 主数据库：PostgreSQL
  - 缓存数据库：Redis
  - 文件存储：本地存储 + 云存储（可选）
- **部署架构**：
  - 容器化：Docker + Docker Compose
  - 反向代理：Nginx
  - 进程管理：PM2
  - 支持云部署和私有化部署

#### 2.1.2 架构设计原则
- **前后端分离**：RESTful API设计，前后端独立开发和部署
- **响应式设计**：一套代码适配PC端和移动端
- **模块化开发**：组件化和模块化设计，便于维护和扩展
- **微服务架构**：支持高并发和水平扩展
- **数据安全**：数据传输加密，敏感信息加密存储
- **最终一致性**：通过事件驱动架构保证数据最终一致性
- **服务发现**：环境变量配置 + 健康检查
- **缓存策略**：Redis缓存热点数据，提高系统性能
- **API网关**：统一API入口，提供路由转发、认证鉴权等功能
- **异步通信**：Redis Pub/Sub实现服务间异步通信

### 2.2 系统集成
- 支持第三方物流系统对接
- 预留IoT设备接入接口
- 支持ERP系统集成
- 提供标准API接口，支持外部系统集成
- 支持数据导入导出，便于系统间数据迁移

### 2.3 微服务架构详情

#### 2.3.1 服务列表

**核心业务服务：**
- **auth-service** (端口: 3001) - 用户认证与授权服务
- **base-service** (端口: 3002) - 基地与牛舍管理服务
- **cattle-service** (端口: 3003) - 牛只管理服务
- **health-service** (端口: 3004) - 健康管理服务
- **feeding-service** (端口: 3005) - 饲养管理服务
- **equipment-service** (端口: 3006) - 设备管理服务
- **procurement-service** (端口: 3007) - 采购管理服务
- **sales-service** (端口: 3008) - 销售管理服务
- **material-service** (端口: 3009) - 物料管理服务
- **news-service** (端口: 3013) - 新闻管理服务

**支撑服务：**
- **api-gateway** (端口: 3000) - API网关，统一入口
- **notification-service** (端口: 3010) - 通知服务
- **file-service** (端口: 3011) - 文件服务
- **monitoring-service** (端口: 3012) - 监控服务

#### 2.3.2 通信方式
- **同步通信**：HTTP/REST API
- **异步通信**：Redis Pub/Sub
- **服务发现**：环境变量配置 + 健康检查
- **数据一致性**：通过事件驱动架构保证最终一致性

#### 2.3.3 API访问模式
所有API通过网关统一访问：
```
http://localhost:3000/api/v1/{service}/...
```

示例：
- 用户登录: `POST http://localhost:3000/api/v1/auth/login`
- 获取牛只列表: `GET http://localhost:3000/api/v1/cattle/list`
- 健康检查: `GET http://localhost:3000/health`

#### 2.3.4 数据库设计
- 每个微服务拥有独立的数据库实例
- 共享数据库用于存储跨服务的公共数据
- 使用Redis缓存热点数据，提高查询性能
- 支持数据库事务处理，保证数据一致性

---

## 3. 业务流程

### 3.1 核心业务流程

#### 3.1.1 采购流程
1. **供应商管理**：维护供应商信息、资质、联系方式
2. **采购订单创建**：关联供应商、牛只类型、数量、价格、交付时间
3. **订单审批**：多级审批流程，确保采购合理性
4. **牛只入场**：记录运输信息、到场时间、初步检查
5. **验收入库**：健康检查、耳标分配、牛只信息录入系统
6. **付款结算**：根据验收结果进行财务结算

该流程主要由procurement-service和cattle-service协作完成，通过auth-service进行权限控制，file-service支持文档上传。

#### 3.1.2 养殖流程
1. **牛只分群**：根据品种、年龄、性别、健康状况等进行分群管理
2. **日常管理**：记录牛只日常行为、异常情况
3. **饲喂管理**：制定饲喂计划、记录饲喂量、配方管理
4. **健康监测**：定期体检、疾病预防、疫苗接种
5. **生长记录**：体重监测、生长曲线分析
6. **转群/转场**：记录牛只位置变更信息

该流程主要由cattle-service、health-service和feeding-service协作完成，通过equipment-service支持设备数据接入。

#### 3.1.3 销售流程
1. **销售计划**：根据库存和市场情况制定销售计划
2. **客户管理**：维护客户信息、联系方式、合作历史
3. **订单管理**：创建销售订单、关联牛只信息、价格、交付方式
4. **出栏检疫**：确保牛只健康状况符合销售标准
5. **交付结算**：安排运输、确认交付、完成财务结算
6. **售后跟踪**：收集客户反馈、处理售后问题

该流程主要由sales-service和cattle-service协作完成，通过notification-service进行销售通知。

### 3.2 数据流转

#### 3.2.1 横向数据流转
- **采购到养殖**：采购数据自动流转至养殖管理模块，包括牛只基本信息、来源信息等
- **养殖到健康**：养殖数据支撑健康管理模块，为健康监测和诊疗提供基础数据
- **养殖到饲喂**：牛只信息和生长数据为饲喂决策提供依据
- **养殖到销售**：健康和生长数据为销售定价和客户选择提供支持
- **销售到采购**：销售数据反馈至采购计划，形成良性循环

#### 3.2.2 纵向数据流转
- **前端应用层**：用户界面操作产生数据请求
- **API网关层**：统一入口，路由请求至对应微服务
- **微服务层**：业务逻辑处理，数据存取
- **数据存储层**：数据库、缓存、文件存储
- **监控分析层**：收集系统指标、业务指标，进行分析和展示

#### 3.2.3 跨服务数据同步
- 通过事件驱动架构实现数据最终一致性
- 使用Redis Pub/Sub进行服务间异步通信
- 关键业务操作通过Saga模式确保事务一致性
- 定期数据同步机制，确保数据完整性

---

## 4. 功能需求

### 4.1 门户网站模块

#### 4.1.1 功能概述
提供企业对外展示窗口，包含公司介绍、产品展示、新闻发布等功能，作为企业形象展示和业务推广的重要平台。

#### 4.1.2 具体功能
- **首页**：企业概览、核心业务介绍、最新动态展示、产品服务亮点
- **公司介绍**：企业简介、发展历程、企业文化、资质证书、荣誉奖项、团队介绍
- **产品服务**：
  - 采购活牛业务介绍：流程、优势、成功案例
  - 动保服务介绍：疾病防控方案、技术支持、服务保障
  - 代养服务介绍：代养模式、合作流程、收益分析
  - 物资供应介绍：饲料、药品、设备等物资供应服务
  - 肥牛贸易介绍：贸易流程、品质标准、合作方式
  - 屠宰业务介绍：屠宰流程、质量控制、冷链配送
  - 支持图文、视频等多媒体内容展示
- **核心功能模块**：
  - 牛只档案管理：完整的牛只基本信息管理、生命周期事件记录、照片管理和批量操作、耳标管理和打印、数据导入导出功能
  - 健康管理：诊疗记录管理、疫苗接种计划、健康监测和预警、健康数据分析
  - 饲喂管理：饲料配方管理、饲喂记录和计划、饲喂效果分析、成本控制
  - 物资和设备管理：库存管理、物资分类、设备维护
- **新闻中心**：企业动态、行业资讯、政策解读、技术文章、常见问题解答
- **联系我们**：
  - 联系方式展示：电话、邮箱、地址等
  - 在线留言表单：客户咨询、合作意向提交
  - 地图定位功能：企业总部及各基地位置
  - 交通指南：详细的交通路线指引
- **后台管理入口**：管理员登录入口，支持权限验证

#### 4.1.3 技术要求
- 响应式设计，适配PC和移动端各种屏幕尺寸
- SEO优化，提升搜索引擎排名
- 页面加载速度优化，确保良好用户体验
- 支持多媒体内容展示，包括图片、视频等
- 数据统计和分析功能，了解用户访问情况
- 安全性保障，防止恶意攻击和数据泄露

#### 4.1.3 技术要求
- 响应式设计，适配PC和移动端
- SEO优化，提升搜索引擎排名
- 页面加载速度优化

### 4.2 用户认证模块

#### 4.2.1 功能概述
提供安全的用户登录认证机制，确保系统安全性和用户身份的准确识别。该模块由auth-service微服务提供支持，端口号为3001。

#### 4.2.2 具体功能
- **用户登录**：
  - 用户名/密码登录
  - 微信小程序登录（支持移动端快速登录）
  - 登录状态保持
  - 自动跳转到授权页面
- **用户登出**：安全退出系统，清除会话信息
- **用户信息管理**：
  - 获取用户信息：包括基本信息、权限列表等
  - 更新用户信息：个人资料修改、密码修改等
- **Token管理**：
  - 刷新Token：避免用户频繁登录
  - Token验证：确保请求的合法性
- **安全机制**：
  - 登录失败次数限制：防止暴力破解
  - 账户锁定机制：保护用户账户安全
  - 密码找回功能：支持邮箱/手机验证找回
  - 登录日志记录：记录用户登录行为
- **会话管理**：
  - 会话超时自动退出：保障系统安全
  - 单点登录支持：多系统间统一认证
- **微信相关功能**：
  - 微信小程序登录：对接微信开放平台
  - 绑定手机号：完善用户信息

#### 4.2.3 API接口示例
- 用户登录：`POST /api/v1/auth/login`
- 用户登出：`POST /api/v1/auth/logout`
- 获取用户信息：`GET /api/v1/auth/profile`
- 更新用户信息：`PUT /api/v1/auth/profile`
- 刷新Token：`POST /api/v1/auth/refresh`
- 微信登录：`POST /api/v1/auth/wx/login`
- 绑定手机号：`POST /api/v1/auth/wx/bind-phone`

### 4.3 数据总览模块

#### 4.3.1 功能概述
为管理者提供关键业务指标的可视化展示，支持快速决策。该模块主要由monitoring-service微服务提供数据支持，端口号为3012。

#### 4.3.2 具体功能
- **关键指标卡片**：
  - 牛只总数统计：实时显示所有基地的牛只总量
  - 健康率指标：直观展示牛只健康状况比例
  - 月度收入统计：当月销售数据汇总
  - 待处理事项提醒：需要处理的紧急事务提醒
  - 系统健康状态：各微服务运行状态监控
- **可视化图表**：
  - 牛只健康状态分布（饼图）：健康、治疗中、患病牛只比例
  - 牧场运营状态分析（饼图）：各基地运营情况对比
  - 趋势分析图表：牛只数量、销售额等关键指标趋势图
  - 牛只体重增长曲线：展示牛只生长情况
  - 饲料消耗趋势：分析饲料使用效率
- **待处理事项**：
  - 优先级分类显示：按紧急程度分类展示
  - 详情快速查看：点击查看待处理事项详细信息
  - 一键跳转处理：直接跳转到对应处理页面
  - 任务分配功能：支持将任务分配给相关人员
- **高级功能**：
  - 自定义仪表盘配置：用户可根据需求配置显示内容
  - 报表导出功能：支持Excel、PDF格式导出
  - 多维度数据筛选：按时间、基地、牛群等维度筛选
  - 历史数据对比分析：支持不同时间段数据对比
  - 数据钻取功能：从概览数据深入查看明细

#### 4.3.3 技术实现
- 使用ECharts实现数据可视化图表
- 响应式设计，适配不同屏幕尺寸
- 实时数据更新机制
- 图表数据缓存，提高加载速度
- 支持自定义图表主题

#### 4.3.4 业务组件
- **StatCard**：统计卡片组件，展示关键指标
- **PieChart**：饼图组件，展示占比数据
- **TrendChart**：趋势图组件，展示数据变化趋势
- **PendingTasksCard**：待处理事项卡片组件
- **CustomDashboard**：自定义仪表盘组件

### 4.4 采购管理模块

#### 4.4.1 功能概述
管理牛只采购全流程，包括供应商管理、采购订单、合同管理等功能。该模块由procurement-service微服务提供支持，端口号为3007。

#### 4.4.2 具体功能
- **采购订单管理**：
  - 创建采购订单（自动关联当前登录用户所属基地，可选择其他有权限的基地）
  - 系统自动根据用户所属基地进行数据隔离，用户只能查看和管理所属基地的采购订单
  - 牛耳标批量添加和管理
  - 订单状态跟踪（待审批、已审批、执行中、已完成、已取消）
  - 运输信息记录和跟踪
  - 订单变更管理：支持订单修改、取消等操作
  - 订单模板功能：常用采购类型快速下单
- **供应商管理**：
  - 供应商档案管理（基本信息、资质证书、联系方式）
  - 供应商评级系统
  - 供应商绩效统计分析
  - 供应商分类管理：按地区、规模等分类
  - 供应商查询与筛选：快速查找符合条件的供应商
- **合同与财务**：
  - 采购合同管理（合同创建、审批、执行、归档）
  - 发票管理（发票录入、核对、付款状态）
  - 采购成本统计分析
  - 应付款管理：跟踪未付款项
  - 成本核算报表：生成采购成本相关报表
- **流程控制**：
  - 采购审批流程配置
  - 异常预警机制（延迟到货、价格异常等）
  - 采购统计分析报表
  - 采购计划制定：基于养殖需求制定采购计划
  - 采购计划执行情况跟踪

#### 4.4.3 业务流程
1. **采购订单创建流程**：
   - 需求部门提交牛只采购申请
   - 采购部门审核申请，创建采购订单
   - 关联供应商信息和基地信息
   - 牛耳标批量分配和管理
   - 订单提交审批

2. **采购执行流程**：
   - 订单审批通过后，发送给供应商确认
   - 记录运输信息，跟踪运输状态
   - 牛只到场后进行初步检查
   - 验收入库，健康检查并录入系统
   - 财务部门进行结算付款

#### 4.4.4 API接口示例
- 创建采购订单：`POST /api/v1/procurement/orders`
- 获取采购订单列表：`GET /api/v1/procurement/orders`
- 获取采购订单详情：`GET /api/v1/procurement/orders/{id}`
- 添加供应商：`POST /api/v1/procurement/suppliers`
- 获取供应商列表：`GET /api/v1/procurement/suppliers`
- 创建采购合同：`POST /api/v1/procurement/contracts`
- 录入发票信息：`POST /api/v1/procurement/invoices`

### 4.5 养殖管理模块

#### 4.5.1 功能概述
全面管理牛只养殖全流程，包括基地管理、牛棚管理、牛只管理等核心功能。该模块主要由base-service微服务（端口3002）和cattle-service微服务（端口3003）提供支持。

**数据隔离说明**：系统自动根据用户所属基地进行数据隔离，用户只能查看和操作所属基地的养殖数据，包括牛群、牛棚、环境监测数据和巡圈记录等。

#### 4.5.2 牧场档案管理

##### 4.5.2.1 功能概述
记录牧场的基础信息，为养殖管理提供数据支持。

##### 4.5.2.2 具体功能
- **基地信息管理**：
  - 新增/编辑/删除基地信息
  - 查看基地详情
  - 基地列表分页显示
  - 基地状态管理
  - 基地地图定位
  - 基地基本信息变更记录
- **人员信息管理**：
  - 新增/编辑/删除人员信息
  - 查看人员详情
  - 人员列表分页显示
  - 人员角色管理
  - 人员考勤记录
  - 人员培训记录
- **设备信息管理**：
  - 新增/编辑/删除设备信息
  - 查看设备详情
  - 设备列表
  - 设备状态管理
  - 设备维护计划
  - 设备维修记录
- **环境参数管理**：
  - 环境参数设置
  - 环境参数查询
  - 环境参数统计
  - 环境参数预警
  - 环境参数图表分析

#### 4.5.3 牛棚管理

##### 4.5.3.1 功能概述
管理牧场内的牛棚资源，支持牛群的合理分配。

##### 4.5.3.2 具体功能
- **牛棚信息管理**：
  - 新增/编辑/删除牛棚
  - 查看牛棚详情
  - 牛棚列表分页
  - 牛棚状态管理
  - 牛棚容量设置
  - 牛棚布局图管理
- **牛群管理**：
  - 牛群分配
  - 牛群转移
  - 牛群状态查看
  - 牛群信息统计
  - 牛群分类管理
  - 牛群批次管理
- **环境监测**：
  - 温度/湿度/二氧化碳/氨气/光照/噪音等环境参数监测
  - 环境参数预警
  - 环境参数历史记录
  - 环境参数统计
  - 环境参数趋势分析

#### 4.5.4 巡圈记录管理

##### 4.5.4.1 功能概述
记录牧场工作人员的巡圈工作内容，确保牛群健康和养殖环境安全。

##### 4.5.4.2 具体功能
- **巡圈计划管理**：
  - 制定巡圈计划（按时间、区域、人员）
  - 巡圈任务分配
  - 巡圈频率设置
  - 巡圈路线规划
- **巡圈记录管理**：
  - 巡圈打卡签到
  - 牛只状态记录（采食、饮水、活动、精神状态等）
  - 环境异常记录
  - 设备异常记录
  - 拍照上传佐证
  - 问题记录和跟踪
- **巡圈统计分析**：
  - 巡圈完成率统计
  - 问题发现率分析
  - 巡圈效率评估
  - 巡圈质量分析

#### 4.5.5 API接口示例
- 获取基地列表：`GET /api/v1/base/bases`
- 创建基地：`POST /api/v1/base/bases`
- 获取牛棚列表：`GET /api/v1/base/cattle-sheds`
- 创建牛棚：`POST /api/v1/base/cattle-sheds`
- 获取环境参数：`GET /api/v1/base/environment-params`
- 设置环境参数预警：`POST /api/v1/base/environment-alarms`
- 创建巡圈记录：`POST /api/v1/base/patrol-records`
- 获取巡圈记录列表：`GET /api/v1/base/patrol-records`

### 4.6 生产物资与设备管理模块

#### 4.6.1 功能概述
实现饲料、药品、设备等生产物资的全生命周期管理，确保养殖生产所需物资的及时供应和高效利用。该模块主要由material-service微服务（端口3005）和equipment-service微服务（端口3006）提供支持。

#### 4.6.2 生产物资管理

##### 4.6.2.1 功能概述
管理各类生产物资的采购、库存、使用等全过程，确保物资供应充足且合理使用。

##### 4.6.2.2 具体功能
- **物资档案管理**：
  - 物资分类管理（饲料类、药品类、设备类、耗材类等）
  - 物资信息维护（名称、编码、规格、单位、供应商等）
  - 安全库存设置
  - 物资批次管理
  - 物资图片上传
- **库存管理**：
  - 入库管理（采购入库、盘盈入库、调拨入库等）
  - 出库管理（生产领用、销售出库、调拨出库等）
  - 库存盘点（定期盘点、盈亏调整）
  - 库存查询与统计
  - 批次跟踪管理
- **库存预警**：
  - 低库存预警
  - 过期预警
  - 预警通知设置
  - 自动生成补货建议
- **物资分析**：
  - 物资消耗统计
  - 库存周转率分析
  - 成本分析
  - 使用效率评估

#### 4.6.3 生产设备管理

##### 4.6.3.1 功能概述
管理养殖生产过程中使用的各类设备，确保设备正常运行和维护。

##### 4.6.3.2 具体功能
- **设备档案管理**：
  - 设备分类管理（饲喂设备、清洁设备、环控设备、监控设备等）
  - 设备信息维护（名称、编号、品牌、型号、序列号、购买日期、价格等）
  - 设备安装位置管理
  - 设备照片和说明书管理
  - 设备状态管理
- **维护管理**：
  - 维护计划制定（日常保养、定期检修、大修保养）
  - 维护任务提醒
  - 维护记录管理
  - 维护成本统计
  - 维护效果评估
- **故障管理**：
  - 故障报告与记录
  - 故障分类管理
  - 维修进度跟踪
  - 故障原因分析
  - 维修成本统计
- **设备效率分析**：
  - 设备运行时间统计
  - 故障率分析
  - 设备利用率评估
  - 设备投资回报率分析
  - 设备更新建议

#### 4.6.4 API接口示例
- 获取物资列表：`GET /api/v1/materials`
- 创建物资档案：`POST /api/v1/materials`
- 入库操作：`POST /api/v1/inventory/inbound`
- 出库操作：`POST /api/v1/inventory/outbound`
- 获取设备列表：`GET /api/v1/equipment`
- 创建设备档案：`POST /api/v1/equipment`
- 创建维护记录：`POST /api/v1/equipment/{id}/maintenance-records`
- 报告设备故障：`POST /api/v1/equipment/{id}/failures`

### 4.7 牛只管理模块

#### 4.7.1 功能概述
全面管理牛只的基本信息、生长状态、健康状况等全生命周期数据。该模块由cattle-service微服务提供支持，端口号为3003。

#### 4.7.2 牛只档案管理

##### 4.7.2.1 功能概述
建立和维护牛只的详细档案信息，作为养殖管理的基础数据。

##### 4.7.2.2 具体功能
- **基本信息管理**：
  - 耳标号（唯一标识）
  - 品种、性别、出生日期、体重
  - 来源信息（供应商、采购批次等）
  - 所属基地、牛棚信息
- **照片管理**：
  - 多角度照片上传和管理
  - 照片时间轴记录
  - 照片分类管理（全身照、局部照、特殊标记照等）
- **证书管理**：
  - 健康证书和检疫证明管理
  - 证书有效期提醒
  - 证书电子归档
- **血统信息管理**：
  - 父本、母本信息记录
  - 谱系图展示
  - 遗传信息跟踪

#### 4.7.3 生命周期管理

##### 4.7.3.1 功能概述
记录和管理牛只从出生到淘汰的整个生命周期中的重要事件。

##### 4.7.3.2 具体功能
- **事件记录**：
  - 出生记录：时间、体重、健康状况
  - 转群/转场记录：时间、原因、目的地
  - 配种记录：时间、方法、公畜信息
  - 产仔记录：时间、数量、幼畜健康状况
  - 淘汰/死亡记录：时间、原因、处理方式
- **事件时间轴**：
  - 可视化展示牛只生命周期事件
  - 支持按时间顺序查看和筛选
  - 事件详情快速查看
- **批量操作支持**：
  - 批量记录牛只事件
  - 批量转移牛群
  - 批量更新牛只信息

#### 4.7.4 数据管理

##### 4.7.4.1 功能概述
提供牛只数据的导入、导出、查询和统计分析功能。

##### 4.7.4.2 具体功能
- **数据导入导出**：
  - 支持Excel、CSV格式数据导入
  - 支持按条件导出牛只数据
  - 导入模板下载
  - 导入数据验证
- **耳标标签打印**：
  - 支持批量打印耳标标签
  - 支持自定义标签模板
  - 支持不同类型标签打印机
- **牛只查询和筛选**：
  - 多条件组合查询
  - 高级筛选功能
  - 搜索历史记录
  - 保存常用查询条件
- **数据统计分析**：
  - 牛只数量统计（按品种、性别、年龄段等）
  - 体重增长趋势分析
  - 繁殖效率统计
  - 淘汰率分析

#### 4.7.5 业务组件
- **CattleCard**：牛只信息卡片组件，展示牛只基本信息
- **LifecycleEvents**：生命周期事件组件，展示牛只历史事件
- **PhotoManager**：照片管理组件，上传和展示牛只照片
- **CattleFilter**：牛只筛选组件，提供多条件筛选功能
- **WeightChart**：体重增长曲线组件，展示牛只生长情况

#### 4.7.6 API接口示例
- 获取牛只列表：`GET /api/v1/cattle/cattle`
- 创建牛只档案：`POST /api/v1/cattle/cattle`
- 获取牛只详情：`GET /api/v1/cattle/cattle/{id}`
- 更新牛只信息：`PUT /api/v1/cattle/cattle/{id}`
- 添加牛只事件：`POST /api/v1/cattle/events`
- 导入牛只数据：`POST /api/v1/cattle/import`
- 导出牛只数据：`GET /api/v1/cattle/export`

### 4.8 精准饲喂模块

#### 4.8.1 功能概述
实现科学化、精准化的饲喂管理，提高饲料利用率和牛只生长效率。

#### 4.8.2 具体功能
- **配方管理**：
  - 饲料配方创建和编辑
  - 成分项自由添加和配比
  - 配方成本核算
  - 配方版本管理和历史记录
- **饲喂记录管理**：
  - 每日饲喂记录（关联配方、基地、牛棚、牛群）
  - 饲喂记录CRUD操作
  - 多维度筛选（基地/牛棚/配方/时间/操作员）
  - 饲喂量、剩余料量记录
  - 异常情况记录
  - 操作员签名确认
  - 移动端快速录入
  - 批量导入饲喂数据
  - 饲喂记录导出
- **饲喂执行**：
  - 按基地/牛棚/配方/牛只维度管理
  - 各成分用量录入和统计
  - 实际执行与计划对比
- **智能分析**：
  - 饲喂计划自动生成
  - 饲喂提醒功能
  - 饲喂异常报警
  - 数据可视化分析
  - 增重预测模型
  - 饲喂效率分析
  - 优化建议生成

### 4.9 健康管理模块

#### 4.9.1 功能概述
全面管理牛只健康状况，包括诊疗记录、健康监测、疫苗管理等功能。

**数据隔离说明**：系统自动根据用户所属基地进行数据隔离，用户只能查看和管理所属基地的牛只健康数据，包括诊疗记录、健康监测数据、疫情记录等。

#### 4.9.2 具体功能
- **诊疗记录管理**：
  - 多维度牛只选择（按基地/牛棚/配方/牛只）
  - 诊疗记录创建和编辑
  - 每日诊断跟踪
  - 治疗方案制定和执行
  - 诊疗效果评估
- **健康监测**：
  - 体温监测记录
  - 异常症状记录
  - 疫苗接种管理
  - 健康指标趋势分析
- **兽医管理**：
  - 兽医档案管理
  - 兽医任务派发
  - 任务进度跟踪
  - 兽医工作量统计
- **疫情管理**：
  - 疫情上报功能
  - 疫情追踪管理
  - 隔离措施执行
  - 疫情统计分析
- **档案管理**：
  - 健康档案导出打印
  - 检疫证明管理
  - 健康报告生成

### 4.10 销售管理模块

#### 4.10.1 功能概述
管理牛只销售全流程，包括客户管理、订单管理、合同管理等功能。

**数据隔离说明**：系统自动根据用户所属基地进行数据隔离，用户只能查看和管理所属基地的销售订单、物资、客户数据等销售相关信息。

#### 4.10.2 具体功能
- **订单管理**：
  - 销售订单全生命周期管理
  - 订单状态跟踪（询价、报价、确认、执行、完成）
  - 价格分析和趋势预测
  - 交付跟踪管理
- **客户管理**：
  - 客户档案管理（基本信息、联系方式、历史记录）
  - 客户评级系统
  - 客户信用评级
  - 客户回访记录
  - 客户CRUD操作
- **合同与财务**：
  - 销售合同管理（合同创建、审批、执行、归档）
  - 发票管理（发票开具、核对、收款状态）
  - 收款管理和账期跟踪
  - 销售业绩统计分析
- **物流管理**：
  - 物流信息管理
  - 第三方物流API对接
  - 运输状态跟踪
  - 物流成本统计

### 4.11 新闻中心管理模块

#### 4.11.1 功能概述
管理企业新闻发布，支持内容管理、发布控制、互动管理等功能。

#### 4.11.2 权限控制
- **前台新闻查看**：
  - 网站模块的新闻查看不需要权限，所有用户（包括未登录用户）都可以查看新闻内容
- **后台新闻管理**：
  - 超级管理员：全部新闻管理权限
  - 基地管理员：新闻内容增删改查权限
  - 普通员工：新闻查看权限（仅后台查看）

#### 4.11.3 内容管理
- **新闻管理**：
  - 新闻内容创建、编辑、删除
  - 富文本编辑器支持
  - 图片和视频上传
  - 新闻分类管理
- **发布控制**：
  - 定时发布功能
  - 新闻置顶管理
  - 发布状态控制（草稿、已发布、已下线）
- **互动管理**：
  - 浏览量统计
  - 评论管理（审核、回复、删除）
  - 用户互动统计

#### 4.11.4 页面流程设计
1. **新闻列表页面**：
   - 新闻列表展示和筛选
   - 分类管理
   - 置顶和定时发布设置
2. **新闻编辑页面**：
   - 内容编辑器
   - 分类选择
   - 定时发布设置
   - 作者信息管理
3. **新闻详情页面**：
   - 新闻内容展示
   - 浏览量显示
   - 评论互动
   - 权限控制展示

### 4.12 用户管理模块

#### 4.12.1 功能概述
管理系统用户、角色权限、组织架构等功能。

#### 4.12.2 角色权限管理
- **角色定义**：
  - **超级管理员**：拥有系统全部权限，可查看和修改整个系统的所有数据，不受基地限制
  - **基地管理员**：可管理所在养殖基地的所有数据，包括创建、修改、删除等操作权限
  - **普通员工**：只能查看和操作所在养殖基地的数据，具体操作权限由基地管理员分配
- **权限控制**：
  - 基于角色的权限控制（RBAC）
  - **数据权限隔离**：严格通过账号与对应基地绑定实现数据隔离，用户只能操作属于其绑定基地的所有数据
    - 采购订单：仅能查看、创建、管理所属基地的采购订单
    - 养殖功能：仅能操作所属基地的牛只、牛棚、饲喂记录、巡圈记录等
    - 健康管理：仅能管理所属基地的牛只健康数据、诊疗记录等
    - 销售管理：仅能查看和管理所属基地的销售订单、物资等
    - 其他业务数据：均按基地归属进行严格隔离
  - 功能权限细分
  - 权限继承和委派

#### 4.12.3 用户信息管理
- **用户档案**：
  - 基本信息（用户名、真实姓名、工号）
  - 联系方式（手机、邮箱、地址）
  - **所属基地绑定**：用户必须绑定到特定养殖基地，作为数据隔离的核心依据
  - 部门信息
  - 角色权限分配
- **安全管理**：
  - 密码策略配置
  - 登录日志记录
  - 异常操作监控
  - 账户状态管理

#### 4.12.4 组织架构管理
- **组织结构**：
  - 树形组织架构展示
  - 部门层级管理
  - 人员部门分配
  - 组织架构调整

#### 4.12.5 页面流程设计
1. **用户列表页面**：
   - 用户信息展示和筛选
   - 批量导入导出功能
   - 批量操作（启用/禁用、角色分配）
2. **用户详情页面**：
   - 用户权限详情查看
   - 所属基地信息
   - 操作日志查询
3. **组织架构管理页面**：
   - 树形结构展示和编辑
   - 部门人员分配
   - 架构调整操作

#### 4.12.6 审计功能
- **操作日志**：
  - 全程操作记录
  - 多维度查询（用户、模块、时间）
  - 日志导出功能
- **异常监控**：
  - 异常操作报警
  - 安全事件记录
  - 风险评估分析



## 5. 通用功能需求

### 5.1 数据导入导出功能

#### 5.1.1 功能概述
为所有主要业务模块提供统一的数据导入导出能力，支持批量数据处理和系统间数据迁移。

#### 5.1.2 支持模块
- 牛只管理数据
- 采购订单数据
- 饲喂记录数据
- 健康管理数据
- 销售管理数据
- 用户管理数据
- 新闻内容数据

#### 5.1.3 具体功能
- **数据导入**：
  - 支持Excel/CSV格式文件导入
  - 导入前数据校验和预览
  - 错误数据标识和修正提示
  - 批量导入进度显示
  - 导入结果统计报告
- **数据导出**：
  - 支持Excel/CSV/PDF格式导出
  - 自定义导出字段选择
  - 数据筛选条件导出
  - 导出模板下载
  - 导出任务队列管理

### 5.2 数据备份与恢复功能

#### 5.2.1 功能概述
提供系统数据的安全备份和快速恢复能力，确保数据安全性和业务连续性。

#### 5.2.2 具体功能
- **备份功能**：
  - 一键全量数据备份
  - 增量数据备份
  - 定时自动备份
  - 备份文件压缩和加密
  - 备份文件下载功能
- **恢复功能**：
  - 备份文件上传和验证
  - 数据恢复预览
  - 选择性数据恢复
  - 恢复进度监控
  - 恢复结果验证

### 5.3 操作日志审计功能

#### 5.3.1 功能概述
全程记录用户操作行为，提供完整的审计追踪能力，确保系统安全性和合规性。

#### 5.3.2 具体功能
- **日志记录**：
  - 用户登录/登出记录
  - 数据增删改操作记录
  - 系统配置变更记录
  - 异常操作记录
  - 敏感操作记录
- **日志查询**：
  - 按用户维度查询
  - 按模块维度查询
  - 按时间范围查询
  - 按操作类型查询
  - 组合条件查询
- **日志分析**：
  - 操作统计分析
  - 异常行为识别
  - 用户行为分析
  - 系统使用情况分析
- **日志导出**：
  - 审计报告生成
  - 日志数据导出
  - 合规性报告

---

## 6. 非功能性需求

### 6.1 性能需求

#### 6.1.1 响应时间要求
- 页面加载时间：≤ 3秒
- 数据查询响应时间：≤ 2秒
- 报表生成时间：≤ 10秒
- 文件上传下载：支持断点续传

#### 6.1.2 并发性能要求
- 支持100个并发用户同时在线
- 支持1000个牛只数据同时管理
- 支持10000条历史记录查询
- 数据库连接池优化

#### 6.1.3 数据处理能力
- 单次批量导入：≤ 10000条记录
- 数据备份时间：≤ 30分钟
- 报表导出：≤ 50000条记录

### 6.2 可靠性需求

#### 6.2.1 系统可用性
- 系统可用性：≥ 99.5%
- 故障恢复时间：≤ 4小时
- 数据备份频率：每日自动备份
- 灾难恢复能力：支持异地备份

#### 6.2.2 数据完整性
- 数据一致性保证
- 事务处理支持
- 数据校验机制
- 错误处理和回滚

### 6.3 安全性需求

#### 6.3.1 身份认证
- 用户身份验证
- 密码强度要求
- 登录失败锁定
- 会话超时控制

#### 6.3.2 权限控制
- 基于角色的访问控制（RBAC）
- 数据权限隔离
- 操作权限细分
- 敏感操作审批

#### 6.3.3 数据安全
- 数据传输加密（HTTPS）
- 敏感数据存储加密
- 数据备份加密
- 防SQL注入攻击

### 6.4 可扩展性需求

#### 6.4.1 系统扩展
- 模块化设计，支持功能扩展
- 微服务架构，支持水平扩展
- API接口标准化
- 第三方系统集成能力

#### 6.4.2 数据扩展
- 数据库分库分表支持
- 数据归档机制
- 历史数据管理
- 大数据量处理优化

### 6.5 易用性需求

#### 6.5.1 用户界面
- 界面简洁直观
- 操作流程清晰
- 响应式设计
- 多终端适配

#### 6.5.2 用户体验
- 操作提示和帮助
- 错误信息友好提示
- 快捷操作支持
- 个性化设置

#### 6.5.3 移动端适配要求
- **功能完整性**：PC端所有核心功能在移动端均可正常使用
- **界面适配**：
  - 采用响应式布局，自动适配不同屏幕尺寸
  - 移动端专用UI组件（Vant UI）
  - 触摸友好的交互设计
  - 合理的字体大小和按钮尺寸
- **操作优化**：
  - 支持手势操作（滑动、长按、双击等）
  - 优化表单输入体验
  - 简化复杂操作流程
  - 提供快捷操作入口
- **性能优化**：
  - 移动端页面加载速度优化
  - 图片懒加载和压缩
  - 减少网络请求次数
  - 离线缓存关键数据
- **特殊功能**：
  - 支持拍照上传（牛只照片、证书等）
  - GPS定位功能（基地位置记录）
  - 扫码功能（耳标扫描）
  - 推送通知（重要提醒）

### 6.6 兼容性需求

#### 6.6.1 浏览器兼容
- Chrome（推荐）
- Firefox
- Safari
- Edge

#### 6.6.2 移动端兼容
- iOS 12+
- Android 8+
- 响应式Web设计

#### 6.6.3 系统兼容
- Windows Server
- Linux Server
- 云平台部署
- 容器化部署

---

## 7. 项目约束

### 7.1 技术约束
- 采用主流技术栈，确保技术成熟度
- 遵循行业标准和最佳实践
- 考虑技术团队技能匹配
- 预留技术升级空间



## 8. 验收标准

### 8.1 功能验收标准
- 所有功能模块按需求规格实现
- 业务流程完整可用
- 数据处理准确无误
- 用户权限控制有效

### 8.2 性能验收标准
- 满足性能需求指标
- 通过压力测试
- 系统稳定性验证
- 数据安全性验证

### 8.3 用户验收标准
- 用户操作体验良好
- 界面设计符合要求
- 功能易用性达标
- 用户培训和文档完整


