# 肉牛管理系统 - 组件库设计

## 1. 组件库架构

### 1.1 组件分类
```
components/
├── basic/              # 基础组件
│   ├── Button/         # 按钮
│   ├── Input/          # 输入框
│   ├── Select/         # 选择器
│   ├── Card/           # 卡片
│   └── Modal/          # 模态框
├── layout/             # 布局组件
│   ├── Header/         # 页头
│   ├── Sidebar/        # 侧边栏
│   ├── Footer/         # 页脚
│   └── Container/      # 容器
├── data/               # 数据展示组件
│   ├── Table/          # 表格
│   ├── Chart/          # 图表
│   ├── Statistics/     # 统计卡片
│   └── Timeline/       # 时间轴
├── form/               # 表单组件
│   ├── FormItem/       # 表单项
│   ├── Upload/         # 文件上传
│   ├── DatePicker/     # 日期选择
│   └── Cascader/       # 级联选择
├── business/           # 业务组件
│   ├── CattleCard/     # 牛只卡片
│   ├── HealthStatus/   # 健康状态
│   ├── FeedingRecord/  # 饲喂记录
│   └── PurchaseOrder/  # 采购订单
└── mobile/             # 移动端专用组件
    ├── TabBar/         # 底部导航
    ├── ActionSheet/    # 操作面板
    ├── Camera/         # 相机组件
    └── Scanner/        # 扫码组件
```

## 2. 基础组件设计

### 2.1 Button 按钮组件

#### 组件API
```typescript
interface ButtonProps {
  type?: 'primary' | 'secondary' | 'success' | 'warning' | 'danger' | 'text';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  icon?: string;
  block?: boolean;
  ghost?: boolean;
  onClick?: (event: MouseEvent) => void;
}
```

#### 样式设计
```scss
.ranch-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: var(--border-radius-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-base);
  user-select: none;
  
  // 尺寸变体
  &--small {
    height: 32px;
    padding: 0 12px;
    font-size: var(--font-size-small);
  }
  
  &--medium {
    height: 40px;
    padding: 0 16px;
    font-size: var(--font-size-base);
  }
  
  &--large {
    height: 48px;
    padding: 0 24px;
    font-size: var(--font-size-large);
  }
  
  // 类型变体
  &--primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
    color: white;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover), 0 0 20px rgba(25, 118, 210, 0.3);
    }
    
    &:active {
      transform: translateY(0);
    }
    
    /* 科技感光效 */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    &:hover::before {
      left: 100%;
    }
  }
  
  &--secondary {
    background: white;
    color: var(--primary-color);
    border: 1px solid var(--primary-color);
    
    &:hover {
      background: var(--primary-color);
      color: white;
    }
  }
  
  // 加载状态
  &--loading {
    pointer-events: none;
    
    .ranch-button__icon {
      animation: spin 1s linear infinite;
    }
  }
  
  // 禁用状态
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
}
```

### 2.2 Input 输入框组件

#### 组件API
```typescript
interface InputProps {
  value?: string;
  placeholder?: string;
  type?: 'text' | 'password' | 'number' | 'email' | 'tel';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  readonly?: boolean;
  clearable?: boolean;
  prefix?: string;
  suffix?: string;
  maxLength?: number;
  showCount?: boolean;
  onChange?: (value: string) => void;
  onFocus?: (event: FocusEvent) => void;
  onBlur?: (event: FocusEvent) => void;
}
```

#### 样式设计
```scss
.ranch-input {
  position: relative;
  display: inline-block;
  width: 100%;
  
  &__wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background: white;
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-md);
    transition: all var(--transition-base);
    
    &:hover {
      border-color: var(--primary-light);
    }
    
    &:focus-within {
      border-color: var(--primary-color);
      box-shadow: var(--shadow-focus);
    }
  }
  
  &__input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: var(--font-size-base);
    color: var(--text-primary);
    
    &::placeholder {
      color: var(--text-hint);
    }
  }
  
  &__prefix,
  &__suffix {
    display: flex;
    align-items: center;
    color: var(--text-secondary);
  }
  
  &__clear {
    cursor: pointer;
    color: var(--text-hint);
    transition: color var(--transition-fast);
    
    &:hover {
      color: var(--text-secondary);
    }
  }
  
  // 尺寸变体
  &--small {
    .ranch-input__wrapper {
      height: 32px;
      padding: 0 8px;
    }
  }
  
  &--medium {
    .ranch-input__wrapper {
      height: 40px;
      padding: 0 12px;
    }
  }
  
  &--large {
    .ranch-input__wrapper {
      height: 48px;
      padding: 0 16px;
    }
  }
}
```

### 2.3 Card 卡片组件

#### 组件API
```typescript
interface CardProps {
  title?: string;
  extra?: ReactNode;
  bordered?: boolean;
  hoverable?: boolean;
  loading?: boolean;
  size?: 'small' | 'default';
  bodyStyle?: CSSProperties;
  headStyle?: CSSProperties;
}
```

#### 样式设计
```scss
.ranch-card {
  background: white;
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-base);
  overflow: hidden;
  
  &--hoverable {
    cursor: pointer;
    
    &:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-hover);
    }
  }
  
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 24px;
    border-bottom: 1px solid var(--border-light);
    background: var(--bg-secondary);
  }
  
  &__title {
    font-size: var(--font-size-large);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin: 0;
  }
  
  &__extra {
    color: var(--text-secondary);
  }
  
  &__body {
    padding: 24px;
  }
  
  // 加载状态
  &--loading {
    .ranch-card__body {
      position: relative;
      min-height: 200px;
      
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, 
          transparent, 
          rgba(255, 255, 255, 0.4), 
          transparent
        );
        animation: loading 1.5s infinite;
      }
    }
  }
}

@keyframes loading {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}
```

## 3. 数据展示组件

### 3.1 Statistics 统计卡片组件

#### 组件API
```typescript
interface StatisticsProps {
  title: string;
  value: number | string;
  precision?: number;
  prefix?: ReactNode;
  suffix?: ReactNode;
  trend?: {
    value: number;
    type: 'up' | 'down';
  };
  icon?: ReactNode;
  color?: string;
  loading?: boolean;
}
```

#### 组件实现
```vue
<template>
  <div class="ranch-statistics" :class="{ 'ranch-statistics--loading': loading }">
    <div class="ranch-statistics__icon" v-if="icon" :style="{ color }">
      <component :is="icon" />
    </div>
    
    <div class="ranch-statistics__content">
      <div class="ranch-statistics__title">{{ title }}</div>
      
      <div class="ranch-statistics__value">
        <span v-if="prefix" class="ranch-statistics__prefix">{{ prefix }}</span>
        <span class="ranch-statistics__number" ref="numberRef">{{ displayValue }}</span>
        <span v-if="suffix" class="ranch-statistics__suffix">{{ suffix }}</span>
      </div>
      
      <div v-if="trend" class="ranch-statistics__trend" :class="`ranch-statistics__trend--${trend.type}`">
        <Icon :name="trend.type === 'up' ? 'arrow-up' : 'arrow-down'" />
        <span>{{ Math.abs(trend.value) }}%</span>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed, ref, onMounted } from 'vue';

const props = defineProps<StatisticsProps>();

const numberRef = ref<HTMLElement>();
const displayValue = ref(0);

// 数字滚动动画
const animateNumber = (target: number) => {
  const start = 0;
  const duration = 1000;
  const startTime = Date.now();
  
  const update = () => {
    const elapsed = Date.now() - startTime;
    const progress = Math.min(elapsed / duration, 1);
    
    // 使用缓动函数
    const easeOut = 1 - Math.pow(1 - progress, 3);
    displayValue.value = Math.floor(start + (target - start) * easeOut);
    
    if (progress < 1) {
      requestAnimationFrame(update);
    }
  };
  
  requestAnimationFrame(update);
};

onMounted(() => {
  if (typeof props.value === 'number') {
    animateNumber(props.value);
  } else {
    displayValue.value = props.value;
  }
});
</script>
```

### 3.2 Chart 图表组件

#### 组件API
```typescript
interface ChartProps {
  type: 'line' | 'bar' | 'pie' | 'doughnut' | 'gauge';
  data: ChartData;
  options?: ChartOptions;
  height?: number;
  loading?: boolean;
  empty?: boolean;
}
```

#### 饼图组件实现
```vue
<template>
  <div class="ranch-chart" :style="{ height: `${height}px` }">
    <div v-if="loading" class="ranch-chart__loading">
      <div class="ranch-chart__spinner"></div>
    </div>
    
    <div v-else-if="empty" class="ranch-chart__empty">
      <Icon name="chart-empty" size="48" />
      <p>暂无数据</p>
    </div>
    
    <canvas v-else ref="chartRef" class="ranch-chart__canvas"></canvas>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue';
import { Chart, registerables } from 'chart.js';

Chart.register(...registerables);

const props = withDefaults(defineProps<ChartProps>(), {
  height: 300
});

const chartRef = ref<HTMLCanvasElement>();
let chartInstance: Chart | null = null;

const initChart = () => {
  if (!chartRef.value) return;
  
  const ctx = chartRef.value.getContext('2d');
  if (!ctx) return;
  
  // 销毁旧实例
  if (chartInstance) {
    chartInstance.destroy();
  }
  
  // 创建新图表
  chartInstance = new Chart(ctx, {
    type: props.type,
    data: props.data,
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            usePointStyle: true,
            padding: 20,
            font: {
              size: 14
            }
          }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleColor: 'white',
          bodyColor: 'white',
          borderColor: 'rgba(255, 255, 255, 0.1)',
          borderWidth: 1,
          cornerRadius: 8,
          displayColors: true
        }
      },
      animation: {
        duration: 1000,
        easing: 'easeOutQuart'
      },
      ...props.options
    }
  });
};

onMounted(() => {
  initChart();
});

watch(() => props.data, () => {
  initChart();
}, { deep: true });
</script>
```

## 4. 业务组件设计

### 4.1 CattleCard 牛只卡片组件

#### 组件API
```typescript
interface CattleCardProps {
  cattle: {
    id: string;
    earTag: string;
    breed: string;
    gender: 'male' | 'female';
    birthDate: string;
    weight: number;
    healthStatus: 'healthy' | 'sick' | 'treatment';
    photo?: string;
  };
  actions?: Array<{
    label: string;
    icon: string;
    onClick: () => void;
  }>;
  selectable?: boolean;
  selected?: boolean;
  onSelect?: (selected: boolean) => void;
}
```

#### 组件实现
```vue
<template>
  <div class="cattle-card" :class="{ 'cattle-card--selected': selected }">
    <!-- 选择框 -->
    <div v-if="selectable" class="cattle-card__checkbox">
      <input 
        type="checkbox" 
        :checked="selected" 
        @change="handleSelect"
        class="cattle-card__checkbox-input"
      />
    </div>
    
    <!-- 牛只照片 -->
    <div class="cattle-card__photo">
      <img 
        v-if="cattle.photo" 
        :src="cattle.photo" 
        :alt="cattle.earTag"
        class="cattle-card__image"
      />
      <div v-else class="cattle-card__placeholder">
        <Icon name="cattle" size="32" />
      </div>
      
      <!-- 健康状态指示器 -->
      <div class="cattle-card__status" :class="`cattle-card__status--${cattle.healthStatus}`">
        <Icon :name="getStatusIcon(cattle.healthStatus)" size="12" />
      </div>
    </div>
    
    <!-- 牛只信息 -->
    <div class="cattle-card__info">
      <div class="cattle-card__ear-tag">{{ cattle.earTag }}</div>
      <div class="cattle-card__details">
        <div class="cattle-card__detail">
          <Icon name="breed" size="14" />
          <span>{{ cattle.breed }}</span>
        </div>
        <div class="cattle-card__detail">
          <Icon :name="cattle.gender === 'male' ? 'male' : 'female'" size="14" />
          <span>{{ cattle.gender === 'male' ? '公牛' : '母牛' }}</span>
        </div>
        <div class="cattle-card__detail">
          <Icon name="weight" size="14" />
          <span>{{ cattle.weight }}kg</span>
        </div>
        <div class="cattle-card__detail">
          <Icon name="calendar" size="14" />
          <span>{{ formatDate(cattle.birthDate) }}</span>
        </div>
      </div>
    </div>
    
    <!-- 操作按钮 -->
    <div v-if="actions?.length" class="cattle-card__actions">
      <button 
        v-for="action in actions" 
        :key="action.label"
        @click="action.onClick"
        class="cattle-card__action"
        :title="action.label"
      >
        <Icon :name="action.icon" size="16" />
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
const props = defineProps<CattleCardProps>();
const emit = defineEmits<{
  select: [selected: boolean];
}>();

const handleSelect = (event: Event) => {
  const target = event.target as HTMLInputElement;
  emit('select', target.checked);
};

const getStatusIcon = (status: string) => {
  const icons = {
    healthy: 'check-circle',
    sick: 'exclamation-circle',
    treatment: 'medical'
  };
  return icons[status] || 'question-circle';
};

const formatDate = (date: string) => {
  return new Date(date).toLocaleDateString('zh-CN');
};
</script>

<style lang="scss">
.cattle-card {
  position: relative;
  background: white;
  border: 1px solid var(--border-light);
  border-radius: var(--border-radius-lg);
  padding: 16px;
  transition: all var(--transition-base);
  cursor: pointer;
  
  &:hover {
    border-color: var(--primary-color);
    box-shadow: var(--shadow-md);
  }
  
  &--selected {
    border-color: var(--primary-color);
    background: rgba(76, 175, 80, 0.05);
  }
  
  &__checkbox {
    position: absolute;
    top: 8px;
    left: 8px;
    z-index: 1;
  }
  
  &__photo {
    position: relative;
    width: 80px;
    height: 80px;
    margin: 0 auto 12px;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    background: var(--bg-tertiary);
  }
  
  &__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  &__placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    color: var(--text-hint);
  }
  
  &__status {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    
    &--healthy {
      background: var(--success-color);
    }
    
    &--sick {
      background: var(--error-color);
    }
    
    &--treatment {
      background: var(--warning-color);
    }
  }
  
  &__ear-tag {
    font-size: var(--font-size-large);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    text-align: center;
    margin-bottom: 8px;
  }
  
  &__details {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  
  &__detail {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: var(--font-size-small);
    color: var(--text-secondary);
  }
  
  &__actions {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border-light);
  }
  
  &__action {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border: none;
    border-radius: var(--border-radius-sm);
    background: var(--bg-secondary);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
    
    &:hover {
      background: var(--primary-color);
      color: white;
    }
  }
}
</style>
```

### 4.2 HealthStatus 健康状态组件

#### 组件实现
```vue
<template>
  <div class="health-status">
    <div class="health-status__header">
      <h3 class="health-status__title">健康状态概览</h3>
      <div class="health-status__date">{{ currentDate }}</div>
    </div>
    
    <div class="health-status__grid">
      <div 
        v-for="status in healthStats" 
        :key="status.type"
        class="health-status__item"
        :class="`health-status__item--${status.type}`"
      >
        <div class="health-status__icon">
          <Icon :name="status.icon" size="24" />
        </div>
        <div class="health-status__content">
          <div class="health-status__number">{{ status.count }}</div>
          <div class="health-status__label">{{ status.label }}</div>
          <div class="health-status__percentage">
            {{ ((status.count / totalCount) * 100).toFixed(1) }}%
          </div>
        </div>
      </div>
    </div>
    
    <!-- 健康趋势图 -->
    <div class="health-status__chart">
      <Chart 
        type="line" 
        :data="trendData" 
        :options="chartOptions"
        :height="200"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue';

interface HealthStatusProps {
  data: {
    healthy: number;
    sick: number;
    treatment: number;
    trend: Array<{
      date: string;
      healthy: number;
      sick: number;
      treatment: number;
    }>;
  };
}

const props = defineProps<HealthStatusProps>();

const healthStats = computed(() => [
  {
    type: 'healthy',
    icon: 'check-circle',
    label: '健康',
    count: props.data.healthy
  },
  {
    type: 'sick',
    icon: 'exclamation-circle',
    label: '患病',
    count: props.data.sick
  },
  {
    type: 'treatment',
    icon: 'medical',
    label: '治疗中',
    count: props.data.treatment
  }
]);

const totalCount = computed(() => 
  props.data.healthy + props.data.sick + props.data.treatment
);

const currentDate = computed(() => 
  new Date().toLocaleDateString('zh-CN')
);

const trendData = computed(() => ({
  labels: props.data.trend.map(item => item.date),
  datasets: [
    {
      label: '健康',
      data: props.data.trend.map(item => item.healthy),
      borderColor: '#4CAF50',
      backgroundColor: 'rgba(76, 175, 80, 0.1)',
      tension: 0.4
    },
    {
      label: '患病',
      data: props.data.trend.map(item => item.sick),
      borderColor: '#F44336',
      backgroundColor: 'rgba(244, 67, 54, 0.1)',
      tension: 0.4
    },
    {
      label: '治疗中',
      data: props.data.trend.map(item => item.treatment),
      borderColor: '#FF9800',
      backgroundColor: 'rgba(255, 152, 0, 0.1)',
      tension: 0.4
    }
  ]
}));

const chartOptions = {
  responsive: true,
  plugins: {
    legend: {
      position: 'top' as const
    }
  },
  scales: {
    y: {
      beginAtZero: true
    }
  }
};
</script>

<style lang="scss">
.health-status {
  background: white;
  border-radius: var(--border-radius-lg);
  padding: 24px;
  box-shadow: var(--shadow-sm);
  
  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }
  
  &__title {
    font-size: var(--font-size-h3);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin: 0;
  }
  
  &__date {
    color: var(--text-secondary);
    font-size: var(--font-size-small);
  }
  
  &__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
  }
  
  &__item {
    display: flex;
    align-items: center;
    padding: 16px;
    border-radius: var(--border-radius-md);
    border-left: 4px solid;
    
    &--healthy {
      background: rgba(76, 175, 80, 0.1);
      border-left-color: var(--success-color);
      
      .health-status__icon {
        color: var(--success-color);
      }
    }
    
    &--sick {
      background: rgba(244, 67, 54, 0.1);
      border-left-color: var(--error-color);
      
      .health-status__icon {
        color: var(--error-color);
      }
    }
    
    &--treatment {
      background: rgba(255, 152, 0, 0.1);
      border-left-color: var(--warning-color);
      
      .health-status__icon {
        color: var(--warning-color);
      }
    }
  }
  
  &__icon {
    margin-right: 12px;
  }
  
  &__content {
    flex: 1;
  }
  
  &__number {
    font-size: 24px;
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    line-height: 1;
  }
  
  &__label {
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    margin: 4px 0;
  }
  
  &__percentage {
    font-size: var(--font-size-small);
    color: var(--text-hint);
  }
  
  &__chart {
    border-top: 1px solid var(--border-light);
    padding-top: 20px;
  }
}
</style>
```

## 5. 移动端组件

### 5.1 TabBar 底部导航组件

#### 组件实现
```vue
<template>
  <div class="ranch-tabbar">
    <div 
      v-for="tab in tabs" 
      :key="tab.key"
      class="ranch-tabbar__item"
      :class="{ 'ranch-tabbar__item--active': activeKey === tab.key }"
      @click="handleTabClick(tab)"
    >
      <div class="ranch-tabbar__icon">
        <Icon :name="activeKey === tab.key ? tab.activeIcon : tab.icon" size="20" />
        <div v-if="tab.badge" class="ranch-tabbar__badge">{{ tab.badge }}</div>
      </div>
      <div class="ranch-tabbar__label">{{ tab.label }}</div>
    </div>
  </div>
</template>

<script setup lang="ts">
interface TabItem {
  key: string;
  label: string;
  icon: string;
  activeIcon: string;
  badge?: number;
  path?: string;
}

interface TabBarProps {
  tabs: TabItem[];
  activeKey: string;
}

const props = defineProps<TabBarProps>();
const emit = defineEmits<{
  change: [key: string, tab: TabItem];
}>();

const handleTabClick = (tab: TabItem) => {
  emit('change', tab.key, tab);
};
</script>

<style lang="scss">
.ranch-tabbar {
  display: flex;
  background: white;
  border-top: 1px solid var(--border-light);
  padding: 8px 0;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  
  &__item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 4px 8px;
    cursor: pointer;
    transition: all var(--transition-fast);
    
    &--active {
      .ranch-tabbar__icon {
        color: var(--primary-color);
      }
      
      .ranch-tabbar__label {
        color: var(--primary-color);
      }
    }
  }
  
  &__icon {
    position: relative;
    margin-bottom: 4px;
    color: var(--text-secondary);
  }
  
  &__badge {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 16px;
    height: 16px;
    background: var(--error-color);
    color: white;
    border-radius: 8px;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 4px;
  }
  
  &__label {
    font-size: 10px;
    color: var(--text-secondary);
    transition: color var(--transition-fast);
  }
}
</style>
```

### 5.2 Camera 相机组件

#### 组件实现
```vue
<template>
  <div class="ranch-camera" v-show="visible">
    <div class="ranch-camera__overlay" @click="handleClose">
      <div class="ranch-camera__container" @click.stop>
        <div class="ranch-camera__header">
          <button class="ranch-camera__close" @click="handleClose">
            <Icon name="close" size="20" />
          </button>
          <h3 class="ranch-camera__title">拍照</h3>
          <button class="ranch-camera__switch" @click="switchCamera">
            <Icon name="camera-switch" size="20" />
          </button>
        </div>
        
        <div class="ranch-camera__viewport">
          <video 
            ref="videoRef" 
            class="ranch-camera__video"
            autoplay 
            playsinline
          ></video>
          <canvas 
            ref="canvasRef" 
            class="ranch-camera__canvas"
            style="display: none;"
          ></canvas>
          
          <!-- 拍照框 -->
          <div class="ranch-camera__frame"></div>
        </div>
        
        <div class="ranch-camera__controls">
          <button class="ranch-camera__capture" @click="capture">
            <div class="ranch-camera__capture-inner"></div>
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

interface CameraProps {
  visible: boolean;
}

const props = defineProps<CameraProps>();
const emit = defineEmits<{
  close: [];
  capture: [dataUrl: string];
}>();

const videoRef = ref<HTMLVideoElement>();
const canvasRef = ref<HTMLCanvasElement>();
const stream = ref<MediaStream>();
const facingMode = ref<'user' | 'environment'>('environment');

const startCamera = async () => {
  try {
    const constraints = {
      video: {
        facingMode: facingMode.value,
        width: { ideal: 1280 },
        height: { ideal: 720 }
      }
    };
    
    stream.value = await navigator.mediaDevices.getUserMedia(constraints);
    
    if (videoRef.value) {
      videoRef.value.srcObject = stream.value;
    }
  } catch (error) {
    console.error('Camera access error:', error);
  }
};

const stopCamera = () => {
  if (stream.value) {
    stream.value.getTracks().forEach(track => track.stop());
    stream.value = undefined;
  }
};

const switchCamera = async () => {
  stopCamera();
  facingMode.value = facingMode.value === 'user' ? 'environment' : 'user';
  await startCamera();
};

const capture = () => {
  if (!videoRef.value || !canvasRef.value) return;
  
  const video = videoRef.value;
  const canvas = canvasRef.value;
  const ctx = canvas.getContext('2d');
  
  if (!ctx) return;
  
  // 设置画布尺寸
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  
  // 绘制视频帧到画布
  ctx.drawImage(video, 0, 0);
  
  // 获取图片数据
  const dataUrl = canvas.toDataURL('image/jpeg', 0.8);
  
  emit('capture', dataUrl);
  handleClose();
};

const handleClose = () => {
  stopCamera();
  emit('close');
};

onMounted(() => {
  if (props.visible) {
    startCamera();
  }
});

onUnmounted(() => {
  stopCamera();
});

// 监听visible变化
watch(() => props.visible, (visible) => {
  if (visible) {
    startCamera();
  } else {
    stopCamera();
  }
});
</script>

<style lang="scss">
.ranch-camera {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 2000;
  
  &__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  &__container {
    width: 100%;
    height: 100%;
    max-width: 400px;
    background: black;
    display: flex;
    flex-direction: column;
  }
  
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: rgba(0, 0, 0, 0.5);
    color: white;
  }
  
  &__close,
  &__switch {
    background: none;
    border: none;
    color: white;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    
    &:hover {
      background: rgba(255, 255, 255, 0.1);
    }
  }
  
  &__title {
    margin: 0;
    font-size: var(--font-size-large);
  }
  
  &__viewport {
    flex: 1;
    position: relative;
    overflow: hidden;
  }
  
  &__video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  &__frame {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    border: 2px solid white;
    border-radius: 8px;
    
    &::before,
    &::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      border: 2px solid var(--primary-color);
    }
    
    &::before {
      top: -2px;
      left: -2px;
      border-right: none;
      border-bottom: none;
    }
    
    &::after {
      bottom: -2px;
      right: -2px;
      border-left: none;
      border-top: none;
    }
  }
  
  &__controls {
    padding: 32px;
    display: flex;
    justify-content: center;
    background: rgba(0, 0, 0, 0.5);
  }
  
  &__capture {
    width: 64px;
    height: 64px;
    border: 4px solid white;
    border-radius: 50%;
    background: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    
    &:active {
      transform: scale(0.95);
    }
  }
  
  &__capture-inner {
    width: 48px;
    height: 48px;
    background: white;
    border-radius: 50%;
  }
}
</style>
```

这套组件库设计提供了完整的基础组件、数据展示组件、业务组件和移动端专用组件，确保整个系统具有一致的视觉风格和交互体验。每个组件都考虑了可访问性、响应式设计和性能优化，能够满足肉牛管理系统的各种业务需求。