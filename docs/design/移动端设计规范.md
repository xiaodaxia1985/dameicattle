# 肉牛管理系统 - 移动端设计规范

## 1. 移动端设计原则

### 1.1 核心原则
- **拇指优先**：所有交互元素都要考虑拇指操作的便利性
- **内容优先**：在有限的屏幕空间内突出核心内容
- **简化操作**：减少操作步骤，提供快捷入口
- **即时反馈**：每个操作都要有明确的视觉反馈
- **离线可用**：关键功能支持离线操作

### 1.2 设计理念
- **效率至上**：现场作业人员需要快速完成任务
- **直观易懂**：界面元素一目了然，减少学习成本
- **稳定可靠**：在各种环境下都能稳定运行
- **数据准确**：确保数据录入的准确性和完整性

## 2. 屏幕适配规范

### 2.1 设备分类
```css
/* 小屏手机 (iPhone SE, 小米等) */
@media (max-width: 375px) {
  --mobile-padding: 12px;
  --mobile-font-base: 14px;
  --mobile-button-height: 44px;
}

/* 标准手机 (iPhone 12, 华为 P40等) */
@media (min-width: 376px) and (max-width: 414px) {
  --mobile-padding: 16px;
  --mobile-font-base: 15px;
  --mobile-button-height: 48px;
}

/* 大屏手机 (iPhone 12 Pro Max, 华为 Mate等) */
@media (min-width: 415px) {
  --mobile-padding: 20px;
  --mobile-font-base: 16px;
  --mobile-button-height: 52px;
}
```

### 2.2 安全区域
```css
/* iOS安全区域适配 */
.mobile-container {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 状态栏高度 */
.mobile-header {
  height: calc(44px + env(safe-area-inset-top));
  padding-top: env(safe-area-inset-top);
}

/* 底部导航安全区域 */
.mobile-tabbar {
  padding-bottom: calc(8px + env(safe-area-inset-bottom));
}
```

## 3. 触摸交互规范

### 3.1 触摸目标尺寸
```css
/* 最小触摸目标 */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 主要按钮 */
.mobile-button-primary {
  height: 48px;
  padding: 0 24px;
  border-radius: 24px;
}

/* 次要按钮 */
.mobile-button-secondary {
  height: 40px;
  padding: 0 20px;
  border-radius: 20px;
}

/* 图标按钮 */
.mobile-icon-button {
  width: 44px;
  height: 44px;
  border-radius: 22px;
}
```

### 3.2 手势操作
```typescript
// 手势操作类型定义
interface GestureConfig {
  // 滑动操作
  swipe: {
    threshold: 50; // 最小滑动距离
    velocity: 0.3; // 最小滑动速度
  };
  
  // 长按操作
  longPress: {
    duration: 500; // 长按时长
    tolerance: 10; // 位置容差
  };
  
  // 双击操作
  doubleTap: {
    interval: 300; // 双击间隔
    tolerance: 20; // 位置容差
  };
}
```

### 3.3 触摸反馈
```css
/* 按钮按下效果 */
.mobile-button:active {
  transform: scale(0.98);
  opacity: 0.8;
  transition: all 0.1s ease;
}

/* 列表项按下效果 */
.mobile-list-item:active {
  background-color: rgba(0, 0, 0, 0.05);
}

/* 卡片按下效果 */
.mobile-card:active {
  transform: scale(0.99);
  box-shadow: var(--shadow-sm);
}
```

## 4. 导航设计

### 4.1 底部导航设计
```html
<div class="mobile-tabbar">
  <div class="mobile-tabbar__item" data-active="true">
    <div class="mobile-tabbar__icon">
      <svg class="icon-home-filled" width="24" height="24">
        <!-- 首页图标 -->
      </svg>
    </div>
    <span class="mobile-tabbar__label">首页</span>
  </div>
  
  <div class="mobile-tabbar__item">
    <div class="mobile-tabbar__icon">
      <svg class="icon-purchase" width="24" height="24">
        <!-- 采购图标 -->
      </svg>
      <div class="mobile-tabbar__badge">3</div>
    </div>
    <span class="mobile-tabbar__label">采购</span>
  </div>
  
  <div class="mobile-tabbar__item">
    <div class="mobile-tabbar__icon">
      <svg class="icon-cattle" width="24" height="24">
        <!-- 养殖图标 -->
      </svg>
    </div>
    <span class="mobile-tabbar__label">养殖</span>
  </div>
  
  <div class="mobile-tabbar__item">
    <div class="mobile-tabbar__icon">
      <svg class="icon-health" width="24" height="24">
        <!-- 健康图标 -->
      </svg>
    </div>
    <span class="mobile-tabbar__label">健康</span>
  </div>
  
  <div class="mobile-tabbar__item">
    <div class="mobile-tabbar__icon">
      <svg class="icon-profile" width="24" height="24">
        <!-- 个人图标 -->
      </svg>
    </div>
    <span class="mobile-tabbar__label">我的</span>
  </div>
</div>
```

### 4.2 顶部导航设计
```html
<div class="mobile-navbar">
  <div class="mobile-navbar__left">
    <button class="mobile-navbar__back">
      <svg class="icon-arrow-left" width="20" height="20"></svg>
    </button>
  </div>
  
  <div class="mobile-navbar__center">
    <h1 class="mobile-navbar__title">牛只管理</h1>
  </div>
  
  <div class="mobile-navbar__right">
    <button class="mobile-navbar__action">
      <svg class="icon-add" width="20" height="20"></svg>
    </button>
    <button class="mobile-navbar__action">
      <svg class="icon-search" width="20" height="20"></svg>
    </button>
  </div>
</div>
```

### 4.3 侧滑菜单设计
```html
<div class="mobile-drawer" data-visible="false">
  <div class="mobile-drawer__overlay"></div>
  <div class="mobile-drawer__content">
    <div class="mobile-drawer__header">
      <div class="mobile-drawer__avatar">
        <img src="avatar.jpg" alt="用户头像">
      </div>
      <div class="mobile-drawer__user">
        <div class="mobile-drawer__name">张三</div>
        <div class="mobile-drawer__role">基地管理员</div>
      </div>
    </div>
    
    <div class="mobile-drawer__menu">
      <a href="/dashboard" class="mobile-drawer__item">
        <svg class="icon-dashboard" width="20" height="20"></svg>
        <span>数据总览</span>
      </a>
      <a href="/purchase" class="mobile-drawer__item">
        <svg class="icon-purchase" width="20" height="20"></svg>
        <span>采购管理</span>
      </a>
      <!-- 更多菜单项 -->
    </div>
  </div>
</div>
```

## 5. 表单设计

### 5.1 输入框设计
```css
.mobile-input {
  width: 100%;
  height: 48px;
  padding: 0 16px;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  font-size: 16px; /* 防止iOS缩放 */
  background: white;
  
  &:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
  }
  
  &::placeholder {
    color: var(--text-hint);
  }
}

/* 数字输入框 */
.mobile-input--number {
  text-align: right;
  
  /* 隐藏数字输入框的箭头 */
  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
}
```

### 5.2 选择器设计
```html
<div class="mobile-select">
  <div class="mobile-select__trigger">
    <span class="mobile-select__value">请选择基地</span>
    <svg class="mobile-select__arrow" width="16" height="16">
      <path d="M4 6l4 4 4-4" stroke="currentColor" fill="none"/>
    </svg>
  </div>
  
  <!-- 选项面板 -->
  <div class="mobile-select__panel">
    <div class="mobile-select__option" data-selected="true">
      基地A - 北京
    </div>
    <div class="mobile-select__option">
      基地B - 上海
    </div>
  </div>
</div>
```

### 5.3 日期选择器
```html
<div class="mobile-datepicker">
  <div class="mobile-datepicker__input">
    <input type="text" readonly placeholder="选择日期" value="2024-01-15">
    <svg class="mobile-datepicker__icon" width="20" height="20">
      <!-- 日历图标 -->
    </svg>
  </div>
  
  <!-- 日期面板 */
  <div class="mobile-datepicker__panel">
    <div class="mobile-datepicker__header">
      <button class="mobile-datepicker__prev">‹</button>
      <span class="mobile-datepicker__title">2024年1月</span>
      <button class="mobile-datepicker__next">›</button>
    </div>
    
    <div class="mobile-datepicker__calendar">
      <!-- 日历网格 -->
    </div>
  </div>
</div>
```

## 6. 列表设计

### 6.1 基础列表
```html
<div class="mobile-list">
  <div class="mobile-list__item">
    <div class="mobile-list__avatar">
      <img src="cattle-photo.jpg" alt="牛只照片">
    </div>
    <div class="mobile-list__content">
      <div class="mobile-list__title">CN001234</div>
      <div class="mobile-list__subtitle">西门塔尔牛 · 母牛 · 450kg</div>
      <div class="mobile-list__meta">
        <span class="mobile-list__status mobile-list__status--healthy">健康</span>
        <span class="mobile-list__date">2024-01-15</span>
      </div>
    </div>
    <div class="mobile-list__action">
      <svg class="icon-arrow-right" width="16" height="16"></svg>
    </div>
  </div>
</div>
```

### 6.2 滑动操作列表
```html
<div class="mobile-swipe-list">
  <div class="mobile-swipe-item">
    <div class="mobile-swipe-item__content">
      <!-- 列表项内容 -->
    </div>
    <div class="mobile-swipe-item__actions">
      <button class="mobile-swipe-action mobile-swipe-action--edit">
        <svg class="icon-edit" width="20" height="20"></svg>
        <span>编辑</span>
      </button>
      <button class="mobile-swipe-action mobile-swipe-action--delete">
        <svg class="icon-delete" width="20" height="20"></svg>
        <span>删除</span>
      </button>
    </div>
  </div>
</div>
```

### 6.3 虚拟滚动列表
```typescript
// 虚拟滚动配置
interface VirtualListConfig {
  itemHeight: number; // 列表项高度
  bufferSize: number; // 缓冲区大小
  threshold: number;  // 滚动阈值
}

// 使用示例
const virtualListConfig: VirtualListConfig = {
  itemHeight: 80,
  bufferSize: 5,
  threshold: 200
};
```

## 7. 卡片设计

### 7.1 信息卡片
```html
<div class="mobile-card">
  <div class="mobile-card__header">
    <div class="mobile-card__title">牛只信息</div>
    <div class="mobile-card__extra">
      <button class="mobile-card__action">
        <svg class="icon-more" width="16" height="16"></svg>
      </button>
    </div>
  </div>
  
  <div class="mobile-card__body">
    <div class="mobile-card__row">
      <span class="mobile-card__label">耳标号</span>
      <span class="mobile-card__value">CN001234</span>
    </div>
    <div class="mobile-card__row">
      <span class="mobile-card__label">品种</span>
      <span class="mobile-card__value">西门塔尔牛</span>
    </div>
    <div class="mobile-card__row">
      <span class="mobile-card__label">健康状态</span>
      <span class="mobile-card__value mobile-card__value--success">健康</span>
    </div>
  </div>
</div>
```

### 7.2 统计卡片
```html
<div class="mobile-stat-card">
  <div class="mobile-stat-card__icon">
    <svg class="icon-cattle" width="32" height="32"></svg>
  </div>
  <div class="mobile-stat-card__content">
    <div class="mobile-stat-card__number">1,234</div>
    <div class="mobile-stat-card__label">牛只总数</div>
    <div class="mobile-stat-card__trend mobile-stat-card__trend--up">
      <svg class="icon-arrow-up" width="12" height="12"></svg>
      <span>+5.2%</span>
    </div>
  </div>
</div>
```

## 8. 模态框设计

### 8.1 底部弹出框
```html
<div class="mobile-popup" data-position="bottom">
  <div class="mobile-popup__overlay"></div>
  <div class="mobile-popup__content">
    <div class="mobile-popup__header">
      <h3 class="mobile-popup__title">选择操作</h3>
      <button class="mobile-popup__close">
        <svg class="icon-close" width="20" height="20"></svg>
      </button>
    </div>
    
    <div class="mobile-popup__body">
      <button class="mobile-popup__option">
        <svg class="icon-edit" width="20" height="20"></svg>
        <span>编辑信息</span>
      </button>
      <button class="mobile-popup__option">
        <svg class="icon-health" width="20" height="20"></svg>
        <span>健康记录</span>
      </button>
      <button class="mobile-popup__option mobile-popup__option--danger">
        <svg class="icon-delete" width="20" height="20"></svg>
        <span>删除</span>
      </button>
    </div>
  </div>
</div>
```

### 8.2 全屏模态框
```html
<div class="mobile-modal" data-fullscreen="true">
  <div class="mobile-modal__header">
    <button class="mobile-modal__back">
      <svg class="icon-arrow-left" width="20" height="20"></svg>
    </button>
    <h2 class="mobile-modal__title">添加牛只</h2>
    <button class="mobile-modal__save">保存</button>
  </div>
  
  <div class="mobile-modal__body">
    <!-- 表单内容 -->
  </div>
</div>
```

## 9. 特殊功能组件

### 9.1 相机组件
```css
.mobile-camera {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: black;
  z-index: 1000;
  
  &__video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  &__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
  }
  
  &__frame {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    border: 2px solid white;
    border-radius: 8px;
  }
  
  &__controls {
    position: absolute;
    bottom: 40px;
    left: 0;
    right: 0;
    display: flex;
    justify-content: center;
    gap: 40px;
  }
  
  &__button {
    width: 60px;
    height: 60px;
    border: 3px solid white;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    
    &--capture {
      background: white;
      
      &::after {
        content: '';
        width: 40px;
        height: 40px;
        background: black;
        border-radius: 50%;
      }
    }
  }
}
```

### 9.2 扫码组件
```css
.mobile-scanner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: black;
  z-index: 1000;
  
  &__video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  &__overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
  }
  
  &__viewfinder {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 250px;
    height: 250px;
    border: 2px solid transparent;
    
    &::before,
    &::after {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      border: 3px solid var(--primary-color);
    }
    
    &::before {
      top: -3px;
      left: -3px;
      border-right: none;
      border-bottom: none;
    }
    
    &::after {
      bottom: -3px;
      right: -3px;
      border-left: none;
      border-top: none;
    }
  }
  
  &__line {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
    animation: scan 2s linear infinite;
  }
  
  &__tip {
    position: absolute;
    bottom: 100px;
    left: 0;
    right: 0;
    text-align: center;
    color: white;
    font-size: 16px;
  }
}

@keyframes scan {
  0% { transform: translateY(0); }
  100% { transform: translateY(250px); }
}
```

## 10. 性能优化

### 10.1 图片优化
```css
/* 图片懒加载 */
.mobile-image {
  background: var(--bg-tertiary);
  transition: opacity 0.3s ease;
  
  &[data-loaded="false"] {
    opacity: 0;
  }
  
  &[data-loaded="true"] {
    opacity: 1;
  }
}

/* 图片占位符 */
.mobile-image-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  color: var(--text-hint);
  
  &::before {
    content: '';
    width: 24px;
    height: 24px;
    background: currentColor;
    mask: url('data:image/svg+xml,<svg>...</svg>');
  }
}
```

### 10.2 滚动优化
```css
/* 平滑滚动 */
.mobile-scroll-container {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* 滚动条隐藏 */
.mobile-scroll-container::-webkit-scrollbar {
  display: none;
}

/* 下拉刷新 */
.mobile-pull-refresh {
  position: relative;
  
  &__indicator {
    position: absolute;
    top: -60px;
    left: 0;
    right: 0;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    transition: transform 0.3s ease;
  }
  
  &[data-pulling="true"] {
    .mobile-pull-refresh__indicator {
      transform: translateY(60px);
    }
  }
}
```

### 10.3 动画优化
```css
/* 使用transform和opacity进行动画 */
.mobile-fade-enter-active,
.mobile-fade-leave-active {
  transition: opacity 0.3s ease;
}

.mobile-fade-enter-from,
.mobile-fade-leave-to {
  opacity: 0;
}

/* 滑动动画 */
.mobile-slide-enter-active,
.mobile-slide-leave-active {
  transition: transform 0.3s ease;
}

.mobile-slide-enter-from {
  transform: translateX(100%);
}

.mobile-slide-leave-to {
  transform: translateX(-100%);
}

/* 硬件加速 */
.mobile-animated {
  will-change: transform, opacity;
  transform: translateZ(0);
}
```

这套移动端设计规范确保了系统在各种移动设备上都能提供优秀的用户体验，特别针对农业现场作业的特殊需求进行了优化，包括大按钮设计、清晰的视觉反馈、便捷的手势操作等。